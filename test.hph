
@config
{
  @output_file_name `test_file.generated.c`
  @output_file_path `../src/`
}

@table // Defines stacks for different types
Stack_Table (name type default_value max)
{
  { node              UI_Node*             (UI_Node){0}                   32 }
  { top_left          Vec2f32              `vec2f32(0.0f, 0.0f)`          32 }
  { size_x            f32                   g_os_window.dimensions.x      32 }
  { size_y            f32                   g_os_window.dimensions.y      32 }
  { spacing_y         f32                   0.0f                          32 }
  { alignment_kind    UI_Alignment_Kind    UI_Alignment_Kind_Y            32 }
  { width_kind        UI_Width_Kind        UI_Width_Kind_Fill             32 }
  { height_kind       UI_Height_Kind       UI_Height_Kind_Fill            32 }
  { node_color_scheme UI_Node_Color_Scheme ui_context.color_scheme.window 32 }
  { border_color      Color                PURPLE(1)                      32 }
  { background_color  Color                PURPLE(1)                      32 }
}

@generate
{
  `// @Hephaestus generated code $(@time_now) \n\n`
	`#define max 13`
  @foreach(Stack_Table) `// Row $(@index)\ntypedef struct $(name) $(name);\nstruct $(name)_stack\n{\n  $(type) data[$(max)];\n  u32 top_index;\n  $(type) bottom_val;\n};\n\n\n`
  @foreach(Stack_Table) `  one print per row\n`
}
